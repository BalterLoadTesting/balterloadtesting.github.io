<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Historical Trends | AutoBalter Demo</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight,alt,wide.css">
<link rel="preload" as="style" href="./_observablehq/stdlib/inputs.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight,alt,wide.css">
<link rel="stylesheet" type="text/css" href="./_observablehq/stdlib/inputs.css">
<link rel="modulepreload" href="./_observablehq/client.js">
<link rel="modulepreload" href="./_observablehq/runtime.js">
<link rel="modulepreload" href="./_observablehq/stdlib.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/_esm.js">
<link rel="modulepreload" href="./_observablehq/stdlib/inputs.js">
<link rel="modulepreload" href="./_npm/@observablehq/plot@0.6.14/_esm.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/_esm.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/_esm.js">
<link rel="modulepreload" href="./_npm/interval-tree-1d@1.0.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/binary-search-bounds@2.0.5/_esm.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/_esm.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/_esm.js">
<link rel="icon" href="./favicon.ico" type="image/png">
<script type="module">

import {define} from "./_observablehq/client.js";
import {registerFile} from "./_observablehq/stdlib.js";

registerFile("./data/history-stories-error.csv", {"name":"./data/history-stories-error.csv","mimeType":"text/csv","path":"./_file/data/history-stories-error.babb03fa.csv","lastModified":1718026694141});
registerFile("./data/history-stories-latency.csv", {"name":"./data/history-stories-latency.csv","mimeType":"text/csv","path":"./_file/data/history-stories-latency.45370c14.csv","lastModified":1718056370461});
registerFile("./data/history-users-latency.csv", {"name":"./data/history-users-latency.csv","mimeType":"text/csv","path":"./_file/data/history-users-latency.0ca4e61a.csv","lastModified":1718056429403});

define({id: "974e2712", inputs: ["Plot"], outputs: ["latencyHistoryPlot","errorHistoryPlot"], body: (Plot) => {
function latencyHistoryPlot(data, {width, title, error} = {}) {
  return Plot.plot({
    title,
    width,
    height: 300,
    y: {grid: true, label: "Latency (ms)"},
    x: {grid: true, label: "Date"},
    marks: [
      Plot.line(data, {y: "latency", x: "date", marker:true, tip:true, stroke: "#4269d0"}),
      Plot.ruleY([error], {stroke: "red", marker: true, tip: true})
    ]
  });
}

function errorHistoryPlot(data, {width, title, error} = {}) {
  return Plot.plot({
    title,
    width,
    height: 300,
    y: {grid: true, label: "Error Rate (%)"},
    x: {grid: true, label: "Date"},
    marks: [
      Plot.line(data, {y: "error_rate", x: "date", marker:true, tip:true, stroke: "#4269d0"}),
      Plot.ruleY([error], {stroke: "red", marker: true, tip: true})
    ]
  });
}
return {latencyHistoryPlot,errorHistoryPlot};
}});

define({id: "6a8e4b37", inputs: ["view","Inputs"], outputs: ["apis","constraints"], body: (view,Inputs) => {
const apis = [
    "POST /users/new",
    "POST /users/login",
    "POST /stories",
    "GET /stories",
    "GET /stories/{story_id}",
    "POST /stories/{story_id}/comments",
];

const constraints = [
    "Transactions Per Second",
    "p50 Latency (ms)",
    "p90 Latency (ms)",
    "p95 Latency (ms)",
    "p99 Latency (ms)",
    "Error Rate",
];

view(Inputs.form([
  Inputs.select(apis, { label: "API"}),
  Inputs.select(constraints, { label: "Constraint Kind"}),
  Inputs.number([0, Infinity], { label: "Constraint Value"}),
  Inputs.select(constraints, { label: "Constraint Alert On", value: "p90 Latency (ms)"}),
  Inputs.number([0, Infinity], { label: "Alert Value"}),

  Inputs.button("Add tracking")
]));
return {apis,constraints};
}});

define({id: "72be6507", inputs: ["FileAttachment"], outputs: ["latency_0","latency_1","error_0"], body: (FileAttachment) => {
const latency_0 = FileAttachment("./data/history-users-latency.csv").csv({typed: true});
const latency_1 = FileAttachment("./data/history-stories-latency.csv").csv({typed: true});
const error_0 = FileAttachment("./data/history-stories-error.csv").csv({typed: true});
return {latency_0,latency_1,error_0};
}});

define({id: "c36e1322", inline: true, inputs: ["resize","latencyHistoryPlot","latency_0","display"], body: async (resize,latencyHistoryPlot,latency_0,display) => {
display(await(
resize((width) => latencyHistoryPlot(latency_0, {width, title: "POST /users/login at 1,000 TPS, p90 Latency", error: 350.}))
))
}});

define({id: "9ba962a4", inline: true, inputs: ["resize","latencyHistoryPlot","latency_1","display"], body: async (resize,latencyHistoryPlot,latency_1,display) => {
display(await(
resize((width) => latencyHistoryPlot(latency_1, {width, title: "GET /stories at 15,000 TPS, p90 Latency", error: 250.}))
))
}});

define({id: "c49e22e5", inline: true, inputs: ["resize","errorHistoryPlot","error_0","display"], body: async (resize,errorHistoryPlot,error_0,display) => {
display(await(
resize((width) => errorHistoryPlot(error_0, {width, title: "GET /stories at 200ms p90 Latency, Error Rate", error: 30.}))
))
}});

</script>
<input id="observablehq-sidebar-toggle" type="checkbox" title="Toggle sidebar">
<label id="observablehq-sidebar-backdrop" for="observablehq-sidebar-toggle"></label>
<nav id="observablehq-sidebar">
  <ol>
    <label id="observablehq-sidebar-close" for="observablehq-sidebar-toggle"></label>
    <li class="observablehq-link"><a href="./autobalter">AutoBalter Demo</a></li>
  </ol>
  <ol>
    <li class="observablehq-link"><a href="./demo-api-overview.html">API Overview</a></li>
    <li class="observablehq-link observablehq-link-active"><a href="./demo-history.html">Historical Trends</a></li>
    <li class="observablehq-link"><a href="./demo-report.html">Report</a></li>
    <li class="observablehq-link"><a href="./demo-specification.html">Specification</a></li>
  </ol>
</nav>
<script>{Object.assign(document.createElement("a"),{href:""}).password&&location.replace(location.href);const e=document.querySelector("#observablehq-sidebar"),t=document.querySelector("#observablehq-sidebar-toggle"),r=sessionStorage.getItem("observablehq-sidebar");r?t.checked=r==="true":t.indeterminate=!0;for(const o of document.querySelectorAll("#observablehq-sidebar summary")){const s=o.parentElement;switch(sessionStorage.getItem(`observablehq-sidebar:${o.textContent}`)){case"true":s.open=!0;break;case"false":s.classList.contains("observablehq-section-active")||(s.open=!1);break}}addEventListener("beforeunload",()=>sessionStorage.setItem("observablehq-sidebar-scrolly",`${e.scrollTop}`));const a=sessionStorage.getItem("observablehq-sidebar-scrolly");a!=null&&(e.style.cssText="overflow: hidden;",e.scrollTop=+a,e.style.cssText="");}</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<div id="cell-974e2712" class="observablehq observablehq--block"></div>
<h1 id="historical-trends" tabindex="-1"><a class="observablehq-header-anchor" href="#historical-trends">Historical Trends</a></h1>
<div class="tip">
<p>AutoBalter can be configured to track custom, long-term statistics about your APIs. Get alerted when an API does not meet the requirements.</p>
</div>
<div class="grid grid-cols-1">
  <div class="card">
<div id="cell-6a8e4b37" class="observablehq observablehq--block"></div>
  </div>
</div>
<div id="cell-72be6507" class="observablehq observablehq--block"></div>
<div class="tip">
<p>AutoBalter allows you to easily identify trends in your performance before they become a problem for your users.</p>
</div>
<div class="grid grid-cols-1">
  <div class="card">
  <span id="cell-c36e1322"><span class="observablehq-loading"></span></span>
  </div>
</div>
<div class="tip">
<p>Alerts on performance metrics allow you to identify and fix issues before production.</p>
</div>
<div class="grid grid-cols-1">
  <div class="card">
  <span id="cell-9ba962a4"><span class="observablehq-loading"></span></span>
  </div>
</div>
<div class="tip">
<p>AutoBalter provides the ability to constrain your tracking to what matters for your service. Here, AutoBalter will find the max TPS with the given p90 Latency, and measures the error rate.</p>
</div>
<div class="grid grid-cols-1">
  <div class="card">
  <span id="cell-c49e22e5"><span class="observablehq-loading"></span></span>
  </div>
</div>
</main>
<footer id="observablehq-footer">
<nav><a rel="prev" href="./demo-api-overview.html"><span>API Overview</span></a><a rel="next" href="./demo-report.html"><span>Report</span></a></nav>
<div>BalterLoadTesting.com</div>
</footer>
</div>
